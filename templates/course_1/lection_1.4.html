<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Лекция: Растровое преобразование графических примитивов</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">

</head>
<body>
    <!-- Шапка (растянута на всю ширину) -->
     <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">Курсы по компьютерной графике</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Основной заголовок лекции с иконкой -->
    <div class="lecture-main-title">
        <div class="title-icon">
            <i class="fas fa-calendar"></i> <!-- Иконка файла изображения -->
        </div>
        <h1>Растровое преобразование графических примитивов. Алгоритмы Брезенхема растровой дискретизации отрезка. Алгоритмы Брезенхема растровой дискретизации окружности и эллипса.</h1>
    </div>

    <!-- Основной контент -->
    <div class="main-container">

        <!-- Основное содержимое лекции в сером блоке -->
        <div class="no-overflow" id="yui_3_17_2_1_1749720986368_356"><p></p><h3 style="text-align: center;" id="yui_3_17_2_1_1749720986368_355"><a name="bookmark0">Растровое преобразование графических</a>&nbsp;<a name="bookmark1">примитивов</a></h3><p>&nbsp;</p><h5>•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Алгоритмы&nbsp;Брезенхема&nbsp;растровой дискретизации отрезка<br>•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Алгоритмы&nbsp;Брезенхема&nbsp;растровой дискретизации окружности<br>•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Алгоритмы&nbsp;Брезенхема&nbsp;растровой дискретизации эллипса<br>&nbsp;</h5><p align="left">Экран растрового дисплея можно рассматривать как матрицу дискретных элементов, или пикселей.&nbsp;<u>Процесс определения пикселей, наилучшим образом аппроксимирующих некоторую геометрическую фигуру, называется разложением в растр, или построением растрового образа фигуры.</u>&nbsp;Построчная визуализация растрового образа называется растровой разверткой данной фигуры.</p><p align="left">В компьютерной графике необходимо иметь возможность генерировать отрезки, многоугольники и многогранники (представляющиеся как совокупности определенным образом ориентированных отрезков), окружности, эллипсы, параболы, гиперболы и т.д. Алгоритмы генерации таких фигур основаны на схожих принципах. Так, разложение фигур в растр базируется в большинстве случаев на пошаговом методе. Он предполагает построение фигуры или ее части путем поочередного перехода от текущего пикселя к одному из соседних пикселей, который, в свою очередь, становится текущим. При этом на каждом шаге вопрос о выборе конкретного перехода среди альтернативных вариантов решается с использованием, по сути дела, аналогичных с геометрической точки зрения критериев.</p><p align="center"><a name="bookmark5">&nbsp;</a></p><h1 align="center"><a name="_Алгоритмы_Брезенхема_растровой"></a>Алгоритмы&nbsp;Брезенхема&nbsp;растровой дискретизации отрезка</h1><p align="left"><img width="440" height="479" src="http://eor.dgu.ru/lectures_f/%D0%9A%D1%83%D1%80%D1%81_%D0%BB%D0%B5%D1%86%D0%B8%D0%B9_%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F_%D0%B8_%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0_%D0%93%D0%B0%D0%B4%D0%B6%D0%B8%D0%B5%D0%B2_%D0%90_%D0%9C/%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D1%8F_6.files/image002.png" align="left" hspace="12" v:shapes="Рисунок_x0020_1">При построении растрового образа отрезка необходимо:</p><p align="left">•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Установить критерии "хорошей" аппроксимации (отрезок должен начинаться и кончаться в заданных точках и при этом выглядеть сплошным и прямым);</p><p align="left">•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Кроме того, яркость вдоль отрезка должна быть одинаковой и не зависеть от наклона отрезка и его длины (горизонтальные и вертикальные отрезки всегда будут ярче наклонных, а постоянная яркость вдоль отрезка опять же достигается на вертикальных, горизонтальных и наклоненных под углом в 45° линиях);</p><p align="left">•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Алгоритм должен работать быстро. Для этого необходимо по возможности исключить операции с вещественными числами;</p><p align="left">Более приемлемым для генерации отрезков считается&nbsp;алгоритм&nbsp;Брезенхема.&nbsp;В соответствии с ним отрезок вычерчивается пошагово от начала - точки&nbsp;<span lang="EN-US">P</span><sub>1</sub>&nbsp;с координатами&nbsp;(<span lang="EN-US">x</span><sub>1</sub>,<span lang="EN-US">y</span><sub>1</sub>)&nbsp;- до конца - точки&nbsp;<span lang="EN-US">P</span><sub>2&nbsp;</sub>с координатами&nbsp;<i>(</i><i><span lang="EN-US">x</span></i><i><sub>2</sub></i><i>&nbsp;,</i><i><span lang="EN-US">y</span></i><i><sub>2</sub></i><i>)</i>. Важную роль при этом имеет ориентация отрезка. Ее определяет положение точки&nbsp;<span lang="EN-US">P</span><sub>2</sub>&nbsp;относительно начала координат, которое условно совмещается с точкой&nbsp;<span lang="EN-US">P</span><sub>1</sub>&nbsp;(рис.6.1).</p><p align="left">При попадании точки&nbsp;<span lang="EN-US">P</span><sub>2</sub>&nbsp;в какой-либо октант координатной плоскости говорят о том, что весь отрезок расположен в этом октанте (так, например, считается, что отрезок&nbsp;<span lang="EN-US">P</span><sub>1</sub><span lang="EN-US">P</span><sub>2</sub>&nbsp;на (рис.6.1) расположен в седьмом октанте). На каждом шаге в зависимости от величины тангенса угла наклона отрезка (назовем его угловым коэффициентов и обозначим как&nbsp;<span lang="EN-US">m</span>)&nbsp;единичное приращение одной из координат&nbsp;задается&nbsp;безусловно. Необходимость единичного изменения другой координаты определяется по знаку рассчитываемой на каждом шаге величины&nbsp;<span lang="EN-US">e</span><span lang="EN-US">&nbsp;</span>(ошибки), которая оценивает расстояние между действительным положением отрезка и ближайшими по данной координате адресуемыми точками растра. Если модуль углового коэффициента не больше единицы (1, 4, 5 и 8 октанты), на каждом шаге&nbsp;<span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>изменяется на единицу, а&nbsp;<span lang="EN-US">y</span><span lang="EN-US">&nbsp;</span>либо не изменяется, либо изменяется на единицу (рис.6.1), в зависимости от знака ошибки. При модуле углового коэффициента больше единицы (2, 3, 6 и 7 октанты), наоборот,&nbsp;<span lang="EN-US">y</span><span lang="EN-US">&nbsp;</span>безусловно изменяется на единицу, а знак ошибки используется для принятия решения об изменении величины&nbsp;<span lang="EN-US">x</span>.&nbsp;Знак же приращений координат&nbsp;<span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>и&nbsp;<span lang="EN-US">y</span><span lang="EN-US">&nbsp;</span>зависит от конкретной ориентации отрезка (так, при генерации отрезка&nbsp;<span lang="EN-US">P</span><sub>1</sub><span lang="EN-US">P</span><sub>2</sub>&nbsp;, изображенного на рис.6.1, на каждом шаге&nbsp;<span lang="EN-US">y</span><span lang="EN-US">&nbsp;</span>безусловно будет получать приращение&nbsp;-1,&nbsp;а&nbsp;<span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>- либо изменяться на&nbsp;+1,&nbsp;либо оставаться неизменным).</p><p align="left">Ознакомимся более подробно с принципами работы&nbsp;вещественного алгоритма&nbsp;Брезенхема&nbsp;для генерации отрезка в первом октанте&nbsp;(впоследствии он будет преобразован в целочисленный и обобщен на случай произвольной ориентации отрезка).&nbsp;Значение углового коэффициента отрезка, расположенного в первом октанте, лежит в диапазоне&nbsp;0 &lt;=&nbsp;<span lang="EN-US">m</span><span lang="EN-US">&nbsp;</span>&lt;= 1, и на каждом шаге&nbsp;<span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>безусловно получает приращение&nbsp;+1,&nbsp;а вопрос о приращении&nbsp;<span lang="EN-US">y</span><span lang="EN-US">&nbsp;</span>на&nbsp;+1&nbsp;решается с учетом знака ошибки&nbsp;е.&nbsp;Каким образом она формируется и используется для выбора решения, можно рассмотреть на следующем примере.</p><p align="left"><img width="360" height="418" src="http://eor.dgu.ru/lectures_f/%D0%9A%D1%83%D1%80%D1%81_%D0%BB%D0%B5%D1%86%D0%B8%D0%B9_%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F_%D0%B8_%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0_%D0%93%D0%B0%D0%B4%D0%B6%D0%B8%D0%B5%D0%B2_%D0%90_%D0%9C/%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D1%8F_6.files/image003.jpg" align="left" hspace="12" v:shapes="Рисунок_x0020_10">Допустим, необходимо построить отрезок в первом октанте с угловым коэффициентом&nbsp;<span lang="EN-US">m</span><span lang="EN-US">&nbsp;</span>= 3/8.&nbsp;Точка начала отрезка с координатами&nbsp;(<span lang="EN-US">x</span><sub>1</sub>&nbsp;,&nbsp;<span lang="EN-US">y</span><sub>1</sub>)&nbsp;(впрочем, как и точка его конца) совпадает с каким- либо узлом растра. Активизируем пиксель с такими же координатами адресуемой точки и инициализируем начальное значение ошибки&nbsp;е = -1/2&nbsp;(рис. 6.2). Горизонтальная координата следующей адресуемой точки очевидна:&nbsp;<span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>=&nbsp;<span lang="EN-US">x</span><sub>1</sub>&nbsp;+1.</p><p align="left">Новое значение ошибки рассчитывается путем добавления к ней значения&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;углового&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;коэффициента:&nbsp;е =&nbsp;е+<span lang="EN-US">m</span><span lang="EN-US">&nbsp;</span>= -1/2+3/8 = -1/8. Отрицательное значение ошибки свидетельствует о том, что пересечение реального отрезка с прямой&nbsp;<span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>=&nbsp;<span lang="EN-US">x</span><sub>1</sub>&nbsp;+1&nbsp;расположено ближе&nbsp;к&nbsp;прямой&nbsp;<span lang="EN-US">y</span><span lang="EN-US">&nbsp;</span>=&nbsp;<span lang="EN-US">y</span><sub>1</sub>, чем к прямой&nbsp;<span lang="EN-US">y</span><span lang="EN-US">&nbsp;</span>=&nbsp;<span lang="EN-US">y</span><sub>1</sub>&nbsp;+1&nbsp;(рис.6.2),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;поэтому точка растра (<span lang="EN-US">x</span><sub>1</sub>&nbsp;+&nbsp;1,&nbsp;<span lang="EN-US">y</span><sub>1</sub>) лучше аппроксимирует ход отрезка, чем точка (<span lang="EN-US">x</span><sub>1</sub>&nbsp;+&nbsp;1,<span lang="EN-US">y</span><sub>1</sub>&nbsp;+1). Активизировав пиксель с координатами адресуемой точки (<span lang="EN-US">x</span><sub>1</sub>&nbsp;+&nbsp;1,<span lang="EN-US">y</span><sub>1</sub>), делаем следующий шаг:&nbsp;<span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>=&nbsp;<span lang="EN-US">x</span><sub>1</sub>&nbsp;+ 2,&nbsp;<b><i><span lang="EN-US">e</span></i></b><b><i>=</i></b><b><i><span lang="EN-US">e</span></i></b><b><i>+</i></b><b><i><span lang="EN-US">m</span></i></b><b><i>=-1/8+3/8=1/4</i></b>; т.к. ошибка положительна, задаем единичное приращение по вертикали&nbsp;<span lang="EN-US">y</span><span lang="EN-US">&nbsp;</span>=&nbsp;<span lang="EN-US">y</span><sub>1</sub>&nbsp;+1.&nbsp;Активизируем пиксель с адресуемой точкой (<span lang="EN-US">x</span><sub>1</sub>&nbsp;+&nbsp;2,&nbsp;<span lang="EN-US">y</span><sub>1</sub>&nbsp;+1). Вместе с тем, как только ошибка стала положительной, ее значение необходимо скорректировать путем вычитания единицы:&nbsp;<span lang="EN-US">e</span><span lang="EN-US">&nbsp;</span>= е -1 = 1/4 -1 = - 3/4. Дальнейшие действия алгоритма аналогичны:&nbsp;<span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>=&nbsp;<span lang="EN-US">x</span><sub>1</sub>&nbsp;+&nbsp;3,&nbsp;<span lang="EN-US">e</span><span lang="EN-US">&nbsp;</span>= - 3/4 + 3/8 = - 3/8,&nbsp;<span lang="EN-US">y</span><span lang="EN-US">&nbsp;</span>не увеличивается, активизируется пиксель (<span lang="EN-US">x</span><sub>1</sub>&nbsp;+&nbsp;3,<span lang="EN-US">y</span><sub>1</sub>&nbsp;+1) и т.д. Отметим здесь только еще один нюанс: если на каком-либо шаге ошибка принимает нулевое значение, нет предпочтительного варианта задания вертикальной координаты (т.к. отрезок пересекает соответствующую вертикаль строго посередине между двумя узлами растра); для определенности алгоритм&nbsp;Брезенхема&nbsp;в этом случае дает приращение&nbsp;<span lang="EN-US">y</span><span lang="EN-US">&nbsp;</span>на единицу и корректирует значение ошибки. Поэтому при расчете следующей точки в рассмотренном только что примере результаты будут такими:&nbsp;<span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>=&nbsp;<span lang="EN-US">x</span><sub>1</sub>&nbsp;+&nbsp;4,&nbsp;<span lang="EN-US">e</span><span lang="EN-US">&nbsp;</span>= -3/8+3/8 = 0,&nbsp;<span lang="EN-US">y</span><span lang="EN-US">&nbsp;</span>=&nbsp;<span lang="EN-US">y</span><sub>1</sub>&nbsp;+&nbsp;2, активизация пикселя с координатами адресуемой точки (<span lang="EN-US">x</span><sub>1</sub>&nbsp;+&nbsp;4,&nbsp;<span lang="EN-US">y</span><sub>1</sub>&nbsp;+&nbsp;2&nbsp;), корректировка значения ошибки&nbsp;<span lang="EN-US">e</span><span lang="EN-US">&nbsp;</span>= 0 -1 = -1&nbsp;(см. рис.6.2).</p><p align="left">&nbsp;</p><p align="left">Алгоритм&nbsp;Брезенхема&nbsp;<a href="http://eor.dgu.ru/lectures_f/%D0%9A%D1%83%D1%80%D1%81_%D0%BB%D0%B5%D1%86%D0%B8%D0%B9_%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F_%D0%B8_%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0_%D0%93%D0%B0%D0%B4%D0%B6%D0%B8%D0%B5%D0%B2_%D0%90_%D0%9C/%D0%BE%D1%82%D1%80%D0%B5%D0%B7%D0%BE%D0%BA.pas">(и его программная реализация)</a>&nbsp;для генерации отрезка в первом октанте на блок-схеме выглядит так:</p><p align="left"><img border="0" width="698" height="552" src="http://eor.dgu.ru/lectures_f/%D0%9A%D1%83%D1%80%D1%81_%D0%BB%D0%B5%D1%86%D0%B8%D0%B9_%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F_%D0%B8_%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0_%D0%93%D0%B0%D0%B4%D0%B6%D0%B8%D0%B5%D0%B2_%D0%90_%D0%9C/%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D1%8F_6.files/image016.jpg" v:shapes="Рисунок_x0020_3"></p><p align="left"><span lang="EN-US">Program</span><span lang="EN-US">&nbsp;</span><span lang="EN-US">Lr</span>_3;&nbsp;{ Алгоритмы&nbsp;Брезенхема&nbsp;растровой дискретизации отрезка }</p><p align="left"><span lang="EN-US">Uses&nbsp;GraphABC, CRT;</span></p><p align="left"><span lang="EN-US">Const</span><span lang="EN-US">&nbsp;i1=100; i2=300;&nbsp;</span><span lang="EN-US">j1=100; j2=300;</span></p><p align="left"><span lang="EN-US">Var</span><span lang="EN-US">&nbsp;i,j,di,dj,m:integer;&nbsp;</span><span lang="EN-US">e:real;</span><span lang="EN-US"></span></p><p><span lang="EN-US">&nbsp;Begin</span><span lang="EN-US"></span></p><p align="left"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i:=i1; j:=j1;</span><span lang="EN-US"></span></p><p><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;di:=i2-i1;&nbsp;dj:=j2-j1;&nbsp;</span></p><p><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e:=dj/di-0.5; m:=1;</span><span lang="EN-US"></span></p><p><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;While m&lt;=di do begin</span><span lang="EN-US"></span></p><p align="left"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delay(10);</span></p><p align="left"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PutPixel(i,j,clBlack);</span></p><p align="left"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;While e&gt;0 do begin</span></p><p align="left"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;j:=j+1;</span></p><p align="left"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e:=e-1;</span><span lang="EN-US"></span></p><p><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end;</span><span lang="EN-US"></span></p><p><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i:=i+1;</span><span lang="EN-US"></span></p><p><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e:=e+dj/di;</span><span lang="EN-US"></span></p><p><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m:=m+1;</span><span lang="EN-US"></span></p><p><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end;</span><span lang="EN-US"></span></p><p><span lang="EN-US">&nbsp;&nbsp;end</span>.</p><p align="center"><a name="bookmark6">&nbsp;</a></p><p align="center">&nbsp;</p><p align="center">&nbsp;</p><h1 align="center"><img width="358" height="417" src="http://eor.dgu.ru/lectures_f/%D0%9A%D1%83%D1%80%D1%81_%D0%BB%D0%B5%D1%86%D0%B8%D0%B9_%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F_%D0%B8_%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0_%D0%93%D0%B0%D0%B4%D0%B6%D0%B8%D0%B5%D0%B2_%D0%90_%D0%9C/%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D1%8F_6.files/image019.jpg" align="left" hspace="12" v:shapes="Рисунок_x0020_4"><a name="_Алгоритм_Брезенхема_для"></a>Алгоритм&nbsp;Брезенхема&nbsp;для генерации окружности</h1><p align="left">Существуют несколько версий алгоритма&nbsp;Брезенхема&nbsp;для генерации окружности. Они имеют ряд общих признаков. Так, во всех этих версиях изначально пошагово генерируется одна восьмая часть окружности, расположенная во втором октанте координатной плоскости, при условии, что центр окружности совмещен с точкой начала координат (рис. 6.4); причем ее построение начинается в точке&nbsp;(&nbsp;<span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>=&nbsp;0,&nbsp;<span lang="EN-US">y</span><span lang="EN-US">&nbsp;</span>=&nbsp;<span lang="EN-US">R</span>) и осуществляется в направлении по часовой стрелке.</p><p align="left">При этом&nbsp;<span lang="EN-US">y</span><span lang="EN-US">&nbsp;</span>является монотонно убывающей функцией&nbsp;<span lang="EN-US">x</span>.&nbsp;Остальные части окружности достраиваются последовательными симметричными отражениями: сгенерированной восьмой части во втором октанте - относительно прямой&nbsp;<span lang="EN-US">y</span><span lang="EN-US">&nbsp;</span>=&nbsp;<span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>в первый октант, а полученной после этого четверти окружности в первом квадранте - относительно координатных осей&nbsp;<span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>и&nbsp;<span lang="EN-US">y</span>,&nbsp;а также точки начала координат в четвертый, второй и третий квадранты соответственно. Во всех случаях арифметика&nbsp;целочислена, при анализе альтернативных вариантов перехода (от пикселя к пикселю) используются не численные значения, а только знаки определенных величин (критериев), что упрощает и ускоряет вычисления. Отличаются версии, по сути дела, только несколько разными с математической, в том числе геометрической точки зрения подходами. Рассмотрим кратко первую, самую раннюю, версию алгоритма (сейчас она практически вышла из употребления) и одну из тех, которые появились позже и применяются в настоящее время.</p><p align="left">Теоретические положения, на которых базируется первая версия алгоритма&nbsp;Брезенхема, пригодны для построения четверти (а не одной восьмой части) окружности в первом квадранте. При нахождении в этом квадранте в некоторой текущей точке растра с координатами (<span lang="EN-US">x<sub>i</sub></span>,<span lang="EN-US">y<sub>i</sub></span>) есть только три варианта выбора очередного пикселя (рис.6.5): по горизонтали вправо (направление&nbsp;<span lang="EN-US">H</span>),&nbsp;по диагонали вниз и вправо (направление&nbsp;<span lang="EN-US">D</span>)&nbsp;и по вертикали вниз (направление&nbsp;V).&nbsp;Вместе с тем, в каждой такай ситуации&nbsp;возможны&nbsp;пять типов пересечений реальной окружности и сетки растра (рис. 6.5).</p><p align="left">В качестве первого критерия для выбора очередного шага используется разность между квадратами расстояний от центра окружности до диагональной (по отношению&nbsp;к&nbsp;текущей) точки, т.е. точки с координатами (<span lang="EN-US">x<sub>i</sub></span><span lang="EN-US">&nbsp;</span>+&nbsp;1,<span lang="EN-US">y<sub>i</sub></span><span lang="EN-US">&nbsp;</span>-1), и до реальной окружности:&nbsp;<b><i>∆<sub>i</sub>&nbsp;= (x<sub>i</sub>&nbsp;+ 1)<sup>2</sup>+(y<sub>i</sub>&nbsp;-1)<sup>2</sup>- R<sup>2</sup></i></b><b><i>.</i></b></p><p align="left">При&nbsp;∆<sub>i</sub>&nbsp;&lt; 0&nbsp;диагональная точка находится внутри окружности, т.е. это случаи пересечения&nbsp;1&nbsp;или&nbsp;2.&nbsp;Ясно, что в данной ситуации следует выбрать либо точку (<span lang="EN-US">x<sub>i</sub></span><span lang="EN-US">&nbsp;</span>+1,&nbsp;<span lang="EN-US">y<sub>i</sub></span>), т.е.&nbsp;<img width="352" height="378" src="http://eor.dgu.ru/lectures_f/%D0%9A%D1%83%D1%80%D1%81_%D0%BB%D0%B5%D1%86%D0%B8%D0%B9_%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F_%D0%B8_%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0_%D0%93%D0%B0%D0%B4%D0%B6%D0%B8%D0%B5%D0%B2_%D0%90_%D0%9C/%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D1%8F_6.files/image020.jpg" align="left" hspace="12" v:shapes="Рисунок_x0020_5">шаг&nbsp;<span lang="EN-US">H</span>,&nbsp;либо точку (<span lang="EN-US">x<sub>i</sub></span><span lang="EN-US">&nbsp;</span>+&nbsp;1,<span lang="EN-US">y<sub>i</sub></span><span lang="EN-US">&nbsp;</span>-1), т.е. шаг&nbsp;<span lang="EN-US">D</span>.</p><p>Вторым критерием перехода при таких условиях служит величина:&nbsp;&nbsp;δ=((<span lang="EN-US">x<sub>i</sub></span><span lang="EN-US">&nbsp;</span>+1)<sup>2</sup>+&nbsp;<span lang="EN-US">y<sub>i</sub></span><sup>2</sup>-&nbsp;<span lang="EN-US">R</span><sup>2</sup>)&nbsp;– ((<span lang="EN-US">x<sub>i</sub></span><span lang="EN-US">&nbsp;</span>+1)<sup>2</sup>+&nbsp;(<span lang="EN-US">y<sub>i</sub></span><span lang="EN-US">&nbsp;</span>-1)<sup>2</sup>-&nbsp;<span lang="EN-US">R</span><sup>2</sup>)</p><p align="left">Она представляет собой разность двух модулей: под первым из них стоит разность между квадратами расстояний от центра окружности до горизонтальной (по отношению к текущей) точки и до реальной окружности; под вторым&nbsp;-&nbsp;разность между квадратами расстояний от центра окружности до диагональной (по отношению к текущей) точки и до реальной окружности.</p><p align="left">При&nbsp;δ&nbsp;&lt; =0&nbsp;расстояние от окружности до горизонтальной точки не больше расстояния до диагональной точки, и следует выбирать горизонтальную точку, т.е. шаг&nbsp;<span lang="EN-US">H</span>.</p><p align="left">При&nbsp;δ&nbsp;&gt; 0&nbsp;выбирается диагональная точка, т.е. шаг&nbsp;<span lang="EN-US">D</span>,&nbsp;т.к. расстояние от окружности до нее меньше. Вместе с тем, при варианте пересечения&nbsp;1&nbsp;(см. рис.6.5)</p><p align="left">&nbsp;<b><i>(x<sub>i</sub>&nbsp;+1)<sup>2</sup>+ y<sub>i</sub><sup>2</sup>- R<sup>2</sup>&gt;=</i></b>&nbsp;0<b><i>,</i></b>&nbsp;<b><i>(x<sub>i</sub>&nbsp;+1)<sup>2</sup>+ (y<sub>i</sub>&nbsp;-1)<sup>2</sup>- R<sup>2</sup></i></b>&lt;&nbsp;0, т.к. горизонтальная точка лежит вне или на окружности, а диагональная - внутри нее, поэтому&nbsp;δ&nbsp;можно вычислить по формуле:</p><p>δ&nbsp;=&nbsp;(<span lang="EN-US">x<sub>i</sub></span><span lang="EN-US">&nbsp;</span>+1)<sup>2</sup>+&nbsp;<span lang="EN-US">y</span><sub><span lang="EN-US">i</span></sub>-&nbsp;<span lang="EN-US">R</span><sup>2</sup>+ (<span lang="EN-US">x<sub>i</sub></span><span lang="EN-US">&nbsp;</span>+1)<sup>2</sup>+&nbsp;(<span lang="EN-US">y<sub>i</sub></span><span lang="EN-US">&nbsp;</span>-1)<sup>2</sup>-&nbsp;<span lang="EN-US">R</span><sup>2</sup>; или (после преобразования с учётом выражения для&nbsp;<b><i>∆</i></b><span lang="EN-US">i</span>:&nbsp;<b><i>δ = 2</i></b>&nbsp;(<b><i>∆</i></b><b><i><sub><span lang="EN-US">i</span></sub></i></b><b><i><span lang="EN-US">&nbsp;</span></i></b><b><i>+&nbsp;</i></b><b><i><span lang="EN-US">y<sub>i</sub></span></i></b><b><i><span lang="EN-US">&nbsp;</span></i></b><b><i>)</i></b><b><i>-1<b>.</b></i></b></p><p align="left">При варианте пересечения&nbsp;2&nbsp;(см. рис.6.5) расстояние от окружности до горизонтальной&nbsp;точки&nbsp;безусловно меньше расстояния от нее же до диагональной точки, и выбирать следует горизонтальную. При этом обе точки лежат внутри окружности, поэтому:&nbsp;<b><i>(x<sub>i</sub>&nbsp;+1)<sup>2</sup>+ y<sub>i</sub><sup>2</sup>- R<sup>2</sup>&lt;</i></b>0<b><i>,</i></b>&nbsp;<b><i>(x<sub>i</sub>&nbsp;+1)<sup>2</sup>+ (y<sub>i</sub>&nbsp;-1)<sup>2</sup>- R<sup>2</sup></i></b>&lt;&nbsp;0, и для расчета&nbsp;δ&nbsp;можно использовать ту же формулу, что и при варианте 1, т.к. она дает заведомо отрицательное значение.</p><p align="left">Если&nbsp;<b><i>∆</i></b><span lang="EN-US">i</span><span lang="EN-US">&nbsp;</span>&gt; 0, то диагональная точка находится вне окружности, т.е. это случаи пересечения&nbsp;3&nbsp;или&nbsp;4</p><p>(рис.6.5). Выбирать следует либо точку&nbsp;(&nbsp;<span lang="EN-US">x<sub>i</sub></span><span lang="EN-US">&nbsp;</span>+1,&nbsp;<span lang="EN-US">y<sub>i</sub></span><span lang="EN-US">&nbsp;</span>-1), т.е. шаг&nbsp;<span lang="EN-US">D</span>,&nbsp;либо точку (<span lang="EN-US">x<sub>i</sub></span>,<span lang="EN-US">y<sub>i</sub></span><span lang="EN-US">&nbsp;</span>-1), т.е. шаг&nbsp;V.</p><p>Можно показать (аналогично тому, как это было сделано для предыдущего случая), что критерием для выбора при этом является величина&nbsp;<b><i>δ = 2</i></b>&nbsp;(<b><i>∆</i></b><b><i><sub><span lang="EN-US">i</span></sub></i></b><b><i><span lang="EN-US">&nbsp;</span></i></b><b><i>-&nbsp;</i></b><b><i><span lang="EN-US">x</span></i></b><b><i><sub><span lang="EN-US">i</span></sub></i></b><b><i><span lang="EN-US">&nbsp;</span></i></b><b><i>)</i></b><b><i>-1<b>.</b></i></b></p><p align="left">при&nbsp;δ&nbsp;&lt; =0&nbsp;выбирается диагональная точка, т.к. расстояние от окружности до нее не больше, чем&nbsp;до&nbsp;вертикальной (по отношению к текущей);</p><p align="left">&nbsp;при δ &gt;0 выбирается вертикальная точка, т.к. расстояние от окружности до нее меньше, чем&nbsp;до&nbsp;диагональной.</p><p align="left">Очевидно, что при&nbsp;<b><i>∆</i></b><span lang="EN-US">i</span><span lang="EN-US">&nbsp;</span>=&nbsp;0&nbsp;диагональная точка&nbsp;(&nbsp;<span lang="EN-US">x<sub>i</sub></span><span lang="EN-US">&nbsp;</span>+&nbsp;1,<span lang="EN-US">y<sub>i</sub></span><span lang="EN-US">&nbsp;</span>-1) расположена непосредственно на окружности (вариант пересечения&nbsp;5&nbsp;на рис.6.5), и выбирается именно она.</p><p align="left">Подведем итог. Согласно рассматриваемой версии алгоритма&nbsp;Брезенхема:</p><p align="center"><img border="0" width="792" height="536" src="http://eor.dgu.ru/lectures_f/%D0%9A%D1%83%D1%80%D1%81_%D0%BB%D0%B5%D1%86%D0%B8%D0%B9_%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F_%D0%B8_%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0_%D0%93%D0%B0%D0%B4%D0%B6%D0%B8%D0%B5%D0%B2_%D0%90_%D0%9C/%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D1%8F_6.files/image010.png" v:shapes="Рисунок_x0020_10"><span lang="EN-US"></span></p><p align="left">Если сгенерирована четверть окружности в первом квадранте, для построения полной окружности эту четверть следует симметрично отразить относительно осей&nbsp;<span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>и&nbsp;<span lang="EN-US">y</span><span lang="EN-US">&nbsp;</span>и точки начала координат, т.е. активизировать не только выбранные пиксели (<span lang="EN-US">x<sub>i</sub></span>,<span lang="EN-US">y<sub>i</sub></span>), но и симметричные им пиксели (<span lang="EN-US">x<sub>i</sub></span><sub><span lang="EN-US">&nbsp;</span></sub>-&nbsp;y<sub>i</sub><b><i>)</i></b><b><i>&nbsp;(-</i></b>&nbsp;xi&gt;yi<b><i>) и (-</i></b>&nbsp;xi&gt;<b><i>-</i></b>&nbsp;yi<b><i>).</i></b></p><p align="left">Ниже представлена&nbsp;блок-схема&nbsp;составленная с учетом изложенных соображений алгоритма для прорисовки окружности с исходной генерацией ее четверти:</p><p align="left"><img width="559" height="668" src="http://eor.dgu.ru/lectures_f/%D0%9A%D1%83%D1%80%D1%81_%D0%BB%D0%B5%D1%86%D0%B8%D0%B9_%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F_%D0%B8_%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0_%D0%93%D0%B0%D0%B4%D0%B6%D0%B8%D0%B5%D0%B2_%D0%90_%D0%9C/%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D1%8F_6.files/image021.jpg" align="left" hspace="12" v:shapes="Рисунок_x0020_6"></p><p>&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left"><a href="http://eor.dgu.ru/lectures_f/%D0%9A%D1%83%D1%80%D1%81_%D0%BB%D0%B5%D1%86%D0%B8%D0%B9_%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F_%D0%B8_%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0_%D0%93%D0%B0%D0%B4%D0%B6%D0%B8%D0%B5%D0%B2_%D0%90_%D0%9C/%D0%9E%D0%BA%D1%80%D1%83%D0%B6%D0%BD%D0%BE%D1%81%D1%82%D1%8C%20-%20%D0%91%D1%80%D0%B5%D0%B7%D0%B5%D0%BD%D1%85%D0%B5%D0%BC.exe">Реализация действия Алгоритма&nbsp;Брезенхема&nbsp;для генерации окружности</a></p><p align="left"><img width="445" height="369" src="http://eor.dgu.ru/lectures_f/%D0%9A%D1%83%D1%80%D1%81_%D0%BB%D0%B5%D1%86%D0%B8%D0%B9_%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F_%D0%B8_%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0_%D0%93%D0%B0%D0%B4%D0%B6%D0%B8%D0%B5%D0%B2_%D0%90_%D0%9C/%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D1%8F_6.files/image022.jpg" align="left" hspace="12" v:shapes="Рисунок_x0020_7"></p><p align="left">Рассмотрим теперь более позднюю и достаточно простую версию алгоритма&nbsp;Брезенхема&nbsp;(алгоритм средней точки).&nbsp;В ней учитывается то обстоятельство, что при построении одной восьмой части окружности во втором октанте на каждом шаге возможны только два варианта перехода: по горизонтали, т.е. шаг&nbsp;<span lang="EN-US">H</span>,&nbsp;и по диагонали, т.е. шаг&nbsp;<span lang="EN-US">D</span><span lang="EN-US">&nbsp;</span>(рис.6.7).</p><p align="left">&nbsp;Выбор между ними осуществляется с использованием единственного критерия - разности между квадратами расстояний от центра окружности до точки с координатами&nbsp;(<span lang="EN-US">x<sub>i</sub></span><span lang="EN-US">&nbsp;</span>+1,&nbsp;<span lang="EN-US">y<sub>i</sub></span><span lang="EN-US">&nbsp;</span>-1/2)&nbsp;(так называемой средней точки, расположенной как раз посередине между альтернативными точками перехода, см. рис.6.7) и до реальной окружности:&nbsp;&nbsp;<b><i>∆<sub>i</sub>&nbsp;= (x<sub>i</sub>&nbsp;+ 1)<sup>2</sup>+(y<sub>i</sub>&nbsp;-1/2)<sup>2</sup>- R<sup>2</sup>.</i></b></p><p align="left">Если&nbsp;<b><i>∆</i></b>&nbsp;<span lang="EN-US">i</span><span lang="EN-US">&nbsp;</span>&lt; 0, средняя точка находится внутри окружности, и выбирается шаг&nbsp;<span lang="EN-US">H</span>;&nbsp;если&nbsp;<b><i>∆</i></b><sub><span lang="EN-US">i</span></sub><span lang="EN-US">&nbsp;</span>&gt; 0, эта точка расположена вне окружности или непосредственно на ней, и выбирается шаг&nbsp;<span lang="EN-US">D</span>.&nbsp;При переходе к очередному текущему пикселю можно использовать следующие выражения (для&nbsp;<b><i>∆</i></b><sub><span lang="EN-US">i</span></sub><sub>+1&nbsp;</sub>- без вывода):</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left"><img border="0" width="646" height="144" src="http://eor.dgu.ru/lectures_f/%D0%9A%D1%83%D1%80%D1%81_%D0%BB%D0%B5%D1%86%D0%B8%D0%B9_%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F_%D0%B8_%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0_%D0%93%D0%B0%D0%B4%D0%B6%D0%B8%D0%B5%D0%B2_%D0%90_%D0%9C/%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D1%8F_6.files/image023.png" v:shapes="Рисунок_x0020_11"></p><p align="left">&nbsp;</p><h1 align="center"><a name="bookmark10"></a><a name="_Алгоритмы_Брезенхема_растровой_1"></a>Алгоритмы&nbsp;Брезенхема&nbsp;растровой&nbsp;<a name="bookmark11">дискретизации эллипса</a></h1><p align="left">&nbsp;</p><p align="left"><img width="507" height="374" src="http://eor.dgu.ru/lectures_f/%D0%9A%D1%83%D1%80%D1%81_%D0%BB%D0%B5%D1%86%D0%B8%D0%B9_%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F_%D0%B8_%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0_%D0%93%D0%B0%D0%B4%D0%B6%D0%B8%D0%B5%D0%B2_%D0%90_%D0%9C/%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D1%8F_6.files/image024.jpg" align="left" hspace="12" v:shapes="Рисунок_x0020_8">Существуют несколько версий алгоритма генерации эллипса. Все они являются, по сути дела, обобщениями соответствующих версий алгоритма&nbsp;Брезенхема&nbsp;для генерации окружности. Основные принципы построения эллипса схожи во всех версиях.</p><p align="left">Центр эллипса условно совмещается с точкой начала координат (как и при построении окружности), а оси эллипса - с координатными осями. При этом</p><p>уравнение эллипса имеет вид</p><p align="left"><img border="0" width="282" height="148" src="http://eor.dgu.ru/lectures_f/%D0%9A%D1%83%D1%80%D1%81_%D0%BB%D0%B5%D1%86%D0%B8%D0%B9_%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F_%D0%B8_%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0_%D0%93%D0%B0%D0%B4%D0%B6%D0%B8%D0%B5%D0%B2_%D0%90_%D0%9C/%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D1%8F_6.files/image027.png" v:shapes="Рисунок_x0020_12"></p><p align="left">Генерируется одна четвертая часть эллипса в первом квадранте; затем эта четверть симметрично отражается во второй, третий и четвертый квадранты (рис.6.8). Пошаговое построение четверти эллипса начинается в точке&nbsp;(<span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>=&nbsp;0,<span lang="EN-US">y</span><span lang="EN-US">&nbsp;</span>=&nbsp;<span lang="EN-US">b</span>)&nbsp;и осуществляется в направлении по часовой стрелке. Данный процесс реализуется в два этапа: на первом прорисовывается участок, на котором модуль углового коэффициента принимает значения в диапазоне от нуля до единицы (на рис.6.8 - участок&nbsp;1);&nbsp;на втором - участок, на котором угловой коэффициент по модулю больше единицы (на рис.6.8 - участок&nbsp;2).&nbsp;При решении вопроса о том, на каком шаге следует перейти от построения первого участка к построению второго участка, можно использовать следующие соображения. Теоретически для первого участка справедливо неравенство&nbsp;<span lang="EN-US">b</span><sup>2</sup><span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>&lt;&nbsp;<span lang="EN-US">a</span><sup>2</sup><span lang="EN-US">y</span>, для второго -&nbsp;<sup>&nbsp;</sup>неравенство&nbsp;<span lang="EN-US">b</span><sup>2</sup><span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>&gt;&nbsp;<span lang="EN-US">a</span><sup>2</sup><span lang="EN-US">y</span>; в точке же, разделяющей эти участки, выполняется условие&nbsp;<span lang="EN-US">b</span><sup>2</sup><span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>=&nbsp;<span lang="EN-US">a</span><sup>2</sup><span lang="EN-US">y</span>. Подстановка этого условия в уравнение эллипса и решение последнего в общем виде относительно&nbsp;<span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>дает выражение для расчета горизонтальной координаты в точке, разделяющей участки:</p><p><img width="715" height="270" src="http://eor.dgu.ru/lectures_f/%D0%9A%D1%83%D1%80%D1%81_%D0%BB%D0%B5%D1%86%D0%B8%D0%B9_%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F_%D0%B8_%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0_%D0%93%D0%B0%D0%B4%D0%B6%D0%B8%D0%B5%D0%B2_%D0%90_%D0%9C/%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D1%8F_6.files/image028.jpg" align="left" hspace="12" v:shapes="Рисунок_x0020_9"><img border="0" width="191" height="80" src="http://eor.dgu.ru/lectures_f/%D0%9A%D1%83%D1%80%D1%81_%D0%BB%D0%B5%D1%86%D0%B8%D0%B9_%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F_%D0%B8_%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0_%D0%93%D0%B0%D0%B4%D0%B6%D0%B8%D0%B5%D0%B2_%D0%90_%D0%9C/%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D1%8F_6.files/image029.png" v:shapes="Рисунок_x0020_13"></p><p align="left">При нахождении в некоторой текущей точке с координатами (<span lang="EN-US">x<sub>i</sub></span>,<span lang="EN-US">y<sub>i</sub></span>) на первом участке есть только два варианта перехода к очередной точке (как и при построении одной восьмой части окружности во втором октанте): по горизонтали, т.е. шаг&nbsp;<span lang="EN-US">H</span>,&nbsp;и по диагонали, т.е. шаг&nbsp;<span lang="EN-US">D</span><span lang="EN-US">&nbsp;</span>(рис.6.9а). Критерий перехода формируется путем подстановки в левую часть уравнения эллипса (второго из двух, приведенных выше) координат точки (<span lang="EN-US">x</span>,&nbsp;+&nbsp;1,<span lang="EN-US">y</span>, -1/2&nbsp;)&nbsp;(т.е. средней точки, расположенной посередине между альтернативными точками перехода):</p><p>&nbsp;∆<sub><span lang="EN-US">i</span></sub>&nbsp;=&nbsp;<span lang="EN-US">b</span><sup>2</sup>(<span lang="EN-US">x<sub>i</sub></span><span lang="EN-US">&nbsp;</span>+1)<sup>2</sup>+&nbsp;<span lang="EN-US">a</span><sup>2</sup>(<span lang="EN-US">y</span><i><sub><span lang="EN-US">i</span></sub></i><span lang="EN-US">&nbsp;</span>-1/2)<sup>2</sup>-&nbsp;<span lang="EN-US">a</span><sup>2</sup><span lang="EN-US">b</span><sup>2</sup>;&nbsp;с геометрической точки зрения получаемая величина пропорциональна разности квадратов вертикальных координат средней точки и точки, принадлежащей четверти эллипса, при&nbsp;<span lang="EN-US">x</span><span lang="EN-US">&nbsp;</span>=&nbsp;<span lang="EN-US">x</span>,&nbsp;+1&nbsp;(коэффициентом пропорциональности служит&nbsp;<span lang="EN-US">a</span><sup>2</sup>&nbsp;).</p><p align="left">Если&nbsp;<b><i>∆<sub>i</sub></i></b>&nbsp;&lt; 0, эллипс проходит выше средней точки, и выбирается шаг&nbsp;<span lang="EN-US">H</span>;&nbsp;если&nbsp;<b><i>∆<sub>i</sub>&lt;=</i></b>&nbsp;0, эллипс проходит ниже этой точки или непосредственно через нее, и выбирается шаг&nbsp;<span lang="EN-US">D</span>.</p><p align="left">При переходе к очередному текущему пикселю можно использовать следующие выражения (для&nbsp;<b><i>∆<sub>i</sub></i></b><sub><span lang="EN-US">i</span></sub><sub>+1&nbsp;</sub>- без вывода):</p><p align="left"><img border="0" width="646" height="120" src="http://eor.dgu.ru/lectures_f/%D0%9A%D1%83%D1%80%D1%81_%D0%BB%D0%B5%D1%86%D0%B8%D0%B9_%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F_%D0%B8_%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0_%D0%93%D0%B0%D0%B4%D0%B6%D0%B8%D0%B5%D0%B2_%D0%90_%D0%9C/%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D1%8F_6.files/image034.jpg" v:shapes="Рисунок_x0020_14"><span lang="EN-US"></span></p><p align="left">При нахождении текущей точке (<span lang="EN-US">x<sub>i</sub></span>,<span lang="EN-US">y<sub>i</sub></span>) на втором участке вариантов перехода к очередной точке тоже два: по диагонали, т.е. шаг&nbsp;<span lang="EN-US">D</span>,&nbsp;или по вертикали, т.е. шаг&nbsp;V&nbsp;(рис.6.9б). Критерий перехода формируется по аналогии с предыдущим, но в данном случае используется средняя точка&nbsp;(&nbsp;<span lang="EN-US">x<sub>i</sub></span><span lang="EN-US">&nbsp;</span>+1/2&nbsp;,<span lang="EN-US">y<sub>i</sub></span><span lang="EN-US">&nbsp;</span>-1):</p><p>∆<sub><span lang="EN-US">i</span></sub><span lang="EN-US">&nbsp;</span>=&nbsp;<span lang="EN-US">b</span><sup>2</sup>(<span lang="EN-US">x<sub>i</sub></span><span lang="EN-US">&nbsp;</span>+1/2)<sup>2</sup>+&nbsp;<span lang="EN-US">a</span><sup>2</sup>(<span lang="EN-US">y<sub>i</sub></span><span lang="EN-US">&nbsp;</span>-1)<sup>2</sup>-&nbsp;<span lang="EN-US">a</span><sup>2</sup><span lang="EN-US">b</span><sup>2</sup>;</p><p align="left">получаемая величина пропорциональна разности квадратов горизонтальных координат средней точки и точки, принадлежащей четверти эллипса, при&nbsp;<span lang="EN-US">y</span><span lang="EN-US">&nbsp;</span>=&nbsp;<span lang="EN-US">y<sub>i</sub></span><span lang="EN-US">&nbsp;</span>-1&nbsp;(коэффициент пропорциональности здесь равен&nbsp;<span lang="EN-US">b</span><sup>2</sup>).</p><p align="left">Если&nbsp;<b><i>∆<sub>i</sub></i></b>&nbsp;&lt; 0, эллипс проходит правее средней точки, и выбирается шаг&nbsp;<span lang="EN-US">D</span>;&nbsp;если&nbsp;<b><i>∆<sub>i</sub></i></b>&nbsp;&gt;= 0, эллипс проходит левее этой точки или непосредственно через нее, и выбирается шаг&nbsp;<span lang="EN-US">V</span>.</p><p align="left">Переход к очередному текущему пикселю осуществляется с использованием следующих выражений (для&nbsp;<b><i>∆<sub>i</sub></i></b>&nbsp;<sub>+1</sub>&nbsp;- без вывода):</p><p align="left"><img border="0" width="646" height="119" src="http://eor.dgu.ru/lectures_f/%D0%9A%D1%83%D1%80%D1%81_%D0%BB%D0%B5%D1%86%D0%B8%D0%B9_%D0%9A%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%8F_%D0%B8_%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0_%D0%93%D0%B0%D0%B4%D0%B6%D0%B8%D0%B5%D0%B2_%D0%90_%D0%9C/%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D1%8F_6.files/image035.jpg" v:shapes="Рисунок_x0020_15">&nbsp;</p><p align="left">Вопрос о выборе критерия, на основании которого осуществляется переход от построения первого участка к построению второго участка, решается неоднозначно. Будем считать, что первый участок следует выстраивать до тех пор, пока горизонтальная координата точки, сдвинутой вправо на&nbsp;1/2&nbsp;относительно текущей, меньше чем&nbsp;<span lang="EN-US">x<sub>m</sub></span>, т.е.</p><p align="left">пока выполняется условие&nbsp;<span lang="EN-US">x<sub>i</sub></span><span lang="EN-US">&nbsp;</span>+1/2 &lt;&nbsp;<span lang="EN-US">x<sub>m</sub></span><span lang="EN-US">&nbsp;</span>или (что то же самое)&nbsp;<span lang="EN-US">x<sub>i</sub></span><span lang="EN-US">&nbsp;</span>&lt;&nbsp;<span lang="EN-US">x<sub>m</sub></span><span lang="EN-US">&nbsp;</span>-1/2 =&nbsp;<span lang="EN-US">x<sub>m</sub></span>'.</p><p><a href="http://eor.dgu.ru/lectures_f/Курс_леций_Компьютерная_геометрия_и_графика_Гаджиев_А_М/Эллипс%20-%20Брезенхем.exe" target="_blank">Реализация действия Алгоритма&nbsp;Брезенхема&nbsp;для генерации эллипса</a></p><br><p></p></div>
    </div>
</body>
</html>